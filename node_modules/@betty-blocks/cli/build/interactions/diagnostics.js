"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const typescript_1 = require("typescript");
const reportDiagnostics = (diagnostics) => {
    diagnostics.forEach((diagnostic) => {
        let message = 'Error';
        if (diagnostic.file) {
            const { line, character } = diagnostic.file.getLineAndCharacterOfPosition(diagnostic.start || 0);
            message += ` ${diagnostic.file.fileName} (${line + 1},${character + 1})`;
        }
        message += `: ${typescript_1.flattenDiagnosticMessageText(diagnostic.messageText, '\n')}`;
        console.error(`\u001b[31m${message}\u001b[0m`);
    });
};
exports.default = (filePath) => {
    const config = typescript_1.getDefaultCompilerOptions();
    config.strict = true;
    const program = typescript_1.createProgram([filePath], config);
    const diagnostics = [...typescript_1.getPreEmitDiagnostics(program)];
    if (diagnostics.length > 0) {
        reportDiagnostics(diagnostics);
        process.exit(1);
    }
};
//# sourceMappingURL=diagnostics.js.map